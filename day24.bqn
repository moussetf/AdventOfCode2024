uâ†â€¢Import "util.bqn"
xâ€¿yâ†(âŠ‘':'âŠ¸âˆŠ)Â¨âŠ¸âŠ” u.Lines u.GetContents @
cirâ†" ->"âŠ¸u.SplitÂ¨ x â‹„ inpâ†u.ParseIntâŒ¾(1âŠ¸âŠ‘)Â¨ ": "âŠ¸u.SplitÂ¨y
namâ†âˆ§â·âˆ¾0â€¿2â€¿3âŠ¸âŠÂ¨cir
opâ†>(â†•â‰ nam) {â‰ ğ•©?âŠ‘ğ•©;âŠ¢â€¿ğ•¨â€¿ğ•¨}Â¨ (namâŠ¸âŠâˆ˜(â‹ˆâˆ˜Â¯1âŠ¸âŠ‘Â¨) âŠ” ({"XOR":â‰ ;"OR":âˆ¨;"AND":âˆ§}âˆ˜(1âŠ¸âŠ‘)âˆ¾namâŠ¸âŠâˆ˜(0â€¿2âŠ¸âŠ))Â¨) cir
Binâ†{ğ•Š ğ•©: +Â´2âŠ¸â‹†âŸœ(â†•â‰ )âŠ¸Ã— ğ•©; ğ•Šâ¼ğ•©: â‰¤âŸœ1â—¶(2âŠ¸|âˆ¾ğ•Šâ¼âˆ˜âŒŠâˆ˜(Ã·âŸœ2))â€¿â‹ˆ ğ•©}
Evalâ†{ğ•¨ ğ•Š vxâ€¿vy:
  stateâ†vxâŒ¾(('x'=âŠ‘Â¨nam)âŠ¸/) vyâŒ¾(('y'=âŠ‘Â¨nam)âŠ¸/) Â¯1Â¨nam
  ('z'=âŠ‘Â¨nam)/{s ğ•Š fâ€¿aâ€¿b: a (0>âŒŠ)â—¶Fâ€¿Â¯1â—‹(âŠ‘âŸœs) b}â‰âˆâ€¿1âŸœğ•¨ â€¢_while_ (0>âŒŠÂ´) state
}
vxâ€¿vyâ†(âŠâŠ‘Â¨âŸ2)âŠ¸âŠ”âŸœ(1âŠ¸âŠ‘Â¨)âˆ§inp
â€¢Show Bin op Eval vxâ€¿vy
# The swaps were found by manually inspecting wrong bits in the result
op2â†op {âŒ½âŒ¾(ğ•¨âŠ¸âŠ) ğ•©}Â´ swapsâ†âŸ¨34â€¿272,93â€¿277,77â€¿297,69â€¿9âŸ©
!âˆ§Â´(vx +âŒ¾Bin vy) (((â‰ âŠ¢)â†‘âŠ£)=âŠ¢) op2 Eval vxâ€¿vy
â€¢Show {ğ•¨âˆ¾','âˆ¾ğ•©}Â´âˆ§swapsâˆ¾âŠ¸âŠnam
