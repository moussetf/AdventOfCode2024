uâ†â€¢Import "util.bqn"
xâ†>u.Lines u.GetContents @
# Repeat ğ”½ until the value stops changing
_settleâ†{âŠ‘((ğ”½âŠ‘)â‹ˆâŠ‘)â€¢_while_(âŠ‘â‰¢1âŠ¸âŠ‘) ğ•©â€¿@}
# Moves: forwards, backwards, left turn, right turn
Fâ†{ğ•Š [n,w,s,e]: [Â»n, Â»Ë˜w, Â«s, Â«Ë˜e]}
Bâ†{ğ•Š [n,w,s,e]: [Â«n, Â«Ë˜w, Â»s, Â»Ë˜e]}
Lâ†Â¯1âŠ¸âŒ½ â‹„ Râ†1âŠ¸âŒ½
# Part 1
maskâ†{âŠ‘ğ•©âˆŠ"ES."?0;âˆ}Â¨[x,x,x,x]
distâ†(mask+âŠ¢âŒŠ(1+F)âŒŠ1000+LâŒŠR) _settle {'E':0;âˆ}Â¨[x,x,x,x]
â€¢Show (3âˆ¾âŠ‘(x='S')/â—‹â¥Š(â†•â‰¢x))âŠ‘dist
# Part 2
frâ†1000=RâŠ¸- dist â‹„ flâ†1000=LâŠ¸- dist â‹„ fbâ†1=BâŠ¸- dist
â€¢Show +Â´â¥Šâˆ¨Ë (âŠ¢âˆ¨(frâˆ§R)âˆ¨(flâˆ§L)âˆ¨(fbâˆ§B)) _settle [0Â¨x,0Â¨x,0Â¨x,{'S':1;0}Â¨x]
